{
  "$schema": "../../../../../public/boards/schema/platform-v2.schema.json",
  "schemaVersion": "2.0.0",
  "platform": "rp2040",
  "family": "rp2",
  "name": "RP2040 Series",
  "description": "Raspberry Pi RP2040 dual-core Cortex-M0+ microcontroller with PIO state machines",
  "architecture": "cortex-m0+",
  "version": "2.0.0",

  "memory": {
    "regions": {
      "FLASH": { "origin": "0x10000000", "attr": "rx", "description": "External QSPI Flash (XIP)" },
      "RAM": { "origin": "0x20000000", "attr": "rwx", "description": "Internal SRAM" },
      "SCRATCH_X": { "origin": "0x20040000", "attr": "rwx", "description": "Scratch memory for core 0" },
      "SCRATCH_Y": { "origin": "0x20041000", "attr": "rwx", "description": "Scratch memory for core 1" }
    },
    "stack": { "minSize": 1024 },
    "heap": { "minSize": 2048 }
  },

  "linker": {
    "entry": "_entry_point",
    "template": "rp2040"
  },

  "sources": {
    "pico_sdk": {
      "repo": "github:raspberrypi/pico-sdk",
      "ref": "master",
      "paths": {
        "headers": "src/rp2040/hardware_regs/include/hardware/regs",
        "startup": "src/rp2_common/pico_crt0/rp2_common/pico_standard_link",
        "linker": "src/rp2_common/pico_standard_link",
        "system": "src/rp2_common/pico_runtime"
      },
      "files": {
        "headers": [
          "addressmap.h",
          "resets.h",
          "clocks.h",
          "io_bank0.h",
          "pads_bank0.h",
          "sio.h",
          "xosc.h",
          "pll.h",
          "uart.h",
          "timer.h",
          "dma.h",
          "pwm.h",
          "spi.h",
          "i2c.h",
          "adc.h",
          "pio.h",
          "watchdog.h",
          "vreg_and_chip_reset.h"
        ],
        "system": [
          "runtime.c"
        ]
      }
    },
    "cmsis_core": {
      "repo": "github:ARM-software/CMSIS_5",
      "ref": "master",
      "paths": {
        "headers": "CMSIS/Core/Include"
      },
      "files": {
        "headers": [
          "cmsis_compiler.h",
          "cmsis_gcc.h",
          "cmsis_version.h",
          "core_cm0plus.h"
        ]
      }
    },
    "pico_platform": {
      "repo": "github:raspberrypi/pico-sdk",
      "ref": "master",
      "paths": {
        "headers": "src/rp2_common/hardware_base/include/hardware"
      },
      "files": {
        "headers": [
          "address_mapped.h",
          "platform_defs.h"
        ]
      }
    },
    "pico_base": {
      "repo": "github:raspberrypi/pico-sdk",
      "ref": "master",
      "paths": {
        "headers": "src/common/pico_base/include/pico"
      },
      "files": {
        "headers": [
          "types.h",
          "error.h"
        ]
      }
    }
  },

  "devices": [
    {
      "id": "rp2040",
      "name": "RP2040",
      "flash": 2097152,
      "ram": 270336,
      "frequency": 133000000,
      "defines": ["RP2040", "PICO_BUILD", "PICO_ON_DEVICE", "PICO_RP2040"],
      "fpu": "none",
      "files": {
        "startup": "crt0.S",
        "linker": "memmap_default.ld",
        "header": "rp2040.h"
      }
    }
  ],

  "build": {
    "compilerFlags": [
      "--target=thumbv6m-none-eabi",
      "-mcpu=cortex-m0plus",
      "-mthumb",
      "-mfloat-abi=soft",
      "-nostdlib",
      "-ffreestanding",
      "-ffunction-sections",
      "-fdata-sections"
    ],
    "linkerFlags": [
      "--gc-sections"
    ],
    "defines": [
      "PICO_BUILD",
      "PICO_ON_DEVICE"
    ]
  },

  "frameworks": {
    "arduino": {
      "core": "arduino-pico",
      "coreUrl": "https://github.com/earlephilhower/arduino-pico",
      "packageIndex": "https://github.com/earlephilhower/arduino-pico/releases/download/global/package_rp2040_index.json"
    },
    "native": {
      "sdk": "pico-sdk",
      "sdkVersion": "1.5.1"
    }
  }
}
